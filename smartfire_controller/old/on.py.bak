from rflib import *
from bitstring import *

fp = open('on.bit', 'r')
onbits = fp.readline().strip()
fp.close()
fp = open('off.bit', 'r')
offbits = fp.readline().strip()
fp.close()

print "On:  [{}] {}".format(len(onbits), onbits)
print "Off: [{}] {}".format(len(offbits), offbits)

on = BitArray(bin=onbits)

print ("On: bin[{}]={}, hex[{}]={}".format(on.len, on.bin, on.len/4, on.hex))

d=RfCat()
d.setFreq(314973000)
d.setMdmModulation(MOD_ASK_OOK)
d.setMdmDRate(2400)
#d.setMdmSyncWord(0x0000)

print "Starting"

d.setModeIDLE()

d.RFxmit(data=on.bytes, repeat=2)


#d.RFxmit("\xe5\x96\x69\xb9\xaa\x65\xae\x55\x59\x6b\xa5\x95\x9a\xe5\x56\x95\xb9\x96\x55\x6e\xa5\x56\x68\x00\x00"*5)

#d.RFxmit("\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00")
#d.RFxmit("\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00")

#d.RFxmit("\x00\x00\x00\x00\x00\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\x00\x00\x00\x00\x00")
#d.RFxmit("\x00\x00\x00\x00\x00\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\x00\x00\x00\x00\x00")
#d.RFxmit("\x00\x00\x00\x00\x00\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\x00\x00\x00\x00\x00")
#d.RFxmit("\x00\x00\x00\x00\x00\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\x00\x00\x00\x00\x00")
#d.RFxmit("\x00\x00\x00\x00\x00\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\x00\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\x00\xFF\xFF\x00\x00\xFF\x00\xFF\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\xFF\xFF\xFF\x00\xFF\x00\xFF\x00\x00\xFF\x00\xFF\x00\xFF\x00\xFF\x00\xFF\xFF\x00\x00\xFF\xFF\x00\xFF\x00\x00\x00\x00\x00\x00\x00")

print "TX Complete"

#d.setModeIDLE()

#d.cleanup()
#d.RESET()
